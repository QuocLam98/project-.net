@{
    Layout = "_Admin_Layout";
}
<style>

    .timeline.timeline-border-dashed .timeline-icon {
        border-style: dashed !important;
    }

    .timeline .timeline-icon {
        z-index: 1;
        flex-shrink: 0;
        margin-right: 1rem;
        width: 38px;
        height: 38px;
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        border: 1px solid var(--bs-gray-300);
        border-radius: 50%;
    }

    .timeline {
        --bs-timeline-icon-size: 38px;
        --bs-timeline-icon-space: 0.35rem;
    }

        .timeline .timeline-line {
            display: block;
            content: " ";
            justify-content: center;
            position: absolute;
            z-index: 0;
            left: 0;
            top: 38px;
            bottom: 0;
            transform: translate(50%);
            border-left-width: 1px;
            border-left-style: dashed;
            border-left-color: var(--bs-gray-300);
            width: 38px;
            margin-top: 0.35rem;
            margin-bottom: 0.35rem;
        }

    .icon-info-pass {
        gap: 5px;
    }

    .column-stt, .column-date, .column-createdTime {
        text-align: center;
    }

    .column-kpi {
        text-align: right;
    }
</style>
<div id="kt_app_content" class="app-content flex-column-fluid">
    <div id="kt_app_content_container" class="app-container container-fluid">
        <div class="card mb-5 mb-xl-10">
            <div class="card-body pt-9 pb-0">
                <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bold">
                    <li class="nav-item">
                        <a class="nav-link active" id="view-info" data-bs-toggle="tab" href="#kt_tab_pane_1">Chi tiết hồ sơ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="view-password" data-bs-toggle="tab" href="#kt_tab_pane_2">Thay đổi mật khẩu</a>
                    </li>            
                </ul>

                <div class="tab-content" id="myTabContentProfile">
                    <div class="tab-pane fade show active" id="kt_tab_pane_1" role="tabpanel">

                        <div id="kt_account_settings_profile_details" class="collapse show">

                            <form id="form-info" class="form">
                                <div class="card-body border-top p-9">

                                    @* <div class="d-flex flex-wrap" style="margin-bottom: 20px">
                                        <div class="d-flex flex-column">
                                            <div class="d-flex flex-wrap">

                                                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                                                    <div class="d-flex align-items-center icon-info-pass">
                                                        <i class="ki-duotone ki-dollar fs-2x text-warning">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                            <span class="path3"></span>
                                                        </i>
                                                        <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="4500" data-kt-countup-prefix="$" data-kt-initialized="1" id="turnover"></div>
                                                    </div>
                                                    <div class="fw-semibold fs-6 text-gray-500">Doanh số</div>
                                                </div>

                                                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                                                    <div class="d-flex align-items-center icon-info-pass">
                                                        <i class="ki-solid ki-arrow-circle-left fs-2x text-danger"></i>
                                                        <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="80" data-kt-initialized="1" id="ratio-return"></div>
                                                    </div>
                                                    <div class="fw-semibold fs-6 text-gray-500">Tỉ lệ hoàn</div>
                                                </div>

                                                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-6 mb-3">
                                                    <div class="d-flex align-items-center icon-info-pass">
                                                        <i class="ki-duotone ki-abstract-26 fs-2x text-success">
                                                            <span class="path1"></span>
                                                            <span class="path2"></span>
                                                        </i>
                                                        <div class="fs-2 fw-bold counted" data-kt-countup="true" data-kt-countup-value="60" data-kt-countup-prefix="%" data-kt-initialized="1" id="ratio-combo"></div>
                                                    </div>
                                                    <div class="fw-semibold fs-6 text-gray-500">Tỉ lệ combo</div>
                                                </div>

                                            </div>
                                        </div>
                                    </div> *@

                                    <div class="row mb-6">
                                        <label class="col-lg-2 col-form-label required fw-semibold fs-6">Họ và tên</label>
                                        <div class="col-lg-3">
                                            <input type="text" id="full-name" name="fname" class="form-control form-control-lg  mb-3 mb-lg-0" value="" />
                                        </div>
                                    </div>
                                    <div class="row mb-6">
                                        <label class="col-lg-2 col-form-label fw-semibold fs-6">Tên đăng nhập</label>
                                        <div class="col-lg-3 fv-row">
                                            <label type="text" id="user-name" name="company" class="form-control form-control-lg " value="" title="Không thể chỉnh sửa" style="background-color:#DCDCDC" />
                                        </div>
                                    </div>
                                    <div class="row mb-6">
                                        <label class="col-lg-2 col-form-label fw-semibold fs-6">
                                            <span>Vai trò</span>
                                        </label>
                                        <div class="col-lg-3 fv-row">
                                            <label type="tel" id="role-name" name="phone" class="form-control form-control-lg " value="" title="Không thể chỉnh sửa" style="background-color:#DCDCDC" />
                                        </div>
                                    </div>
                                </div>

                                <div class="card-footer d-flex justify-content-end py-6 px-9">
                                    <button type="button" class="btn btn-primary" id="update-info">
                                        <span class="indicator-label">
                                            Cập nhật
                                        </span>
                                        <span class="indicator-progress">
                                            Đang tải... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                        </span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="tab-pane fade d-none" id="kt_tab_pane_2" role="tabpanel">
                        <div class="card mb-5 mb-xl-10">
                            <form id="form-pass" class="form">
                                <div class="card-body border-top p-9">
                                    <div class="row mb-6">
                                        <label for="currentpassword" class="col-lg-2 col-form-label required fw-semibold fs-6">Mật khẩu hiện tại</label>
                                        <div class="position-relative d-flex align-items-center input-group-pass mb-3 col-lg-3 fv-row">
                                            <span type="button" class="svg-icon svg-icon-1 fs-3 position-absolute me-5 end-0 btn_show_old_pass">
                                                <i class="ki-duotone ki-eye fs-3" id="icon-old-pass">
                                                    <span class="path1 ki-uniEC0B"></span>
                                                    <span class="path2 ki-uniEC0B"></span>
                                                    <span class="path3 ki-uniEC0D"></span>
                                                </i>
                                            </span>
                                            <input type="password" id="old-pass" class="form-control pe-3  mb-3 mb-lg-0">
                                        </div>
                                    </div>

                                    <div class="row mb-6">
                                        <label for="newpassword" class="col-lg-2 col-form-label required fw-semibold fs-6">Mật khẩu mới</label>
                                        <div class="position-relative d-flex align-items-center input-group-pass mb-3 col-lg-3 fv-row">
                                            <span type="button" class="svg-icon svg-icon-1 fs-3 position-absolute me-5 end-0 btn_show_new_pass">
                                                <i class="ki-duotone ki-eye fs-3" id="icon-new-pass">
                                                    <span class="path1 ki-uniEC0B"></span>
                                                    <span class="path2 ki-uniEC0B"></span>
                                                    <span class="path3 ki-uniEC0D"></span>
                                                </i>
                                            </span>
                                            <input type="password" id="new-pass" class="form-control pe-3  mb-3 mb-lg-0">
                                        </div>
                                    </div>
                                    <div class="row mb-6">
                                        <label for="confirmpassword" class="col-lg-2 col-form-label required fw-semibold fs-6">Nhập lại mật khẩu mới</label>
                                        <div class="position-relative d-flex align-items-center input-group-pass mb-3 col-lg-3 fv-row">
                                            <span type="button" class="svg-icon svg-icon-1 fs-3 position-absolute me-5 end-0 btn_show_confirm_pass">
                                                <i class="ki-duotone ki-eye fs-3" id="icon-confirm-pass">
                                                    <span class="path1 ki-uniEC0B"></span>
                                                    <span class="path2 ki-uniEC0B"></span>
                                                    <span class="path3 ki-uniEC0D"></span>
                                                </i>
                                            </span>
                                            <input type="password" id="confirm-pass" class="form-control pe-3  mb-3 mb-lg-0">
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer d-flex justify-content-end py-6 px-9">
                                    <button type="button" class="btn btn-primary" id="update-pass">
                                        <span class="indicator-label">
                                            Cập nhật mật khẩu
                                        </span>
                                        <span class="indicator-progress">
                                            Đang tải... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                        </span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="tab-pane fade d-none" id="kt_tab_pane_3" role="tabpanel">
                        <div class="card mb-5 mb-xl-10">
                            <div id="form-notification" class="card-body" style="">
                                <div class="timeline timeline-border-dashed" id="list-notification">
                                    @*                                     <div class="timeline-item">
                                    <div class="timeline-line"></div>
                                    <div class="timeline-icon me-4">
                                    <i class="ki-duotone ki-flag fs-2 text-gray-500"><span class="path1"></span><span class="path2"></span></i>
                                    </div>
                                    <div class="timeline-content mb-10 mt-n2">
                                    <div class="overflow-auto pe-3">
                                    <div class="fs-5 fw-semibold mb-2">Invitation for crafting engaging designs that speak human workshop</div>
                                    <div class="d-flex align-items-center mt-1 fs-6">
                                    <div class="text-muted me-2 fs-7">Sent at 4:23 PM by</div>
                                    <div class="symbol symbol-circle symbol-25px" data-bs-toggle="tooltip" data-bs-boundary="window" data-bs-placement="top" aria-label="Alan Nilson" data-bs-original-title="Alan Nilson" data-kt-initialized="1">
                                    <img src="/metronic8/demo1/assets/media/avatars/300-1.jpg" alt="img">
                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    </div>
                                    <div class="timeline-item">
                                    <!--begin::Timeline line-->
                                    <div class="timeline-line"></div>
                                    <!--end::Timeline line-->
                                    <!--begin::Timeline icon-->
                                    <div class="timeline-icon">
                                    <i class="ki-duotone ki-abstract-26 fs-2 text-gray-500"><span class="path1"></span><span class="path2"></span></i>
                                    </div>
                                    <!--end::Timeline icon-->
                                    <!--begin::Timeline content-->
                                    <div class="timeline-content mb-10 mt-n1">
                                    <!--begin::Timeline heading-->
                                    <div class="pe-3 mb-5">
                                    <!--begin::Title-->
                                    <div class="fs-5 fw-semibold mb-2">
                                    Task <a href="#" class="text-primary fw-bold me-1">#45890</a>
                                    merged with <a href="#" class="text-primary fw-bold me-1">#45890</a>  in “Ads Pro Admin Dashboard project:
                                    </div>
                                    <!--end::Title-->
                                    <!--begin::Description-->
                                    <div class="d-flex align-items-center mt-1 fs-6">
                                    <!--begin::Info-->
                                    <div class="text-muted me-2 fs-7">Initiated at 4:23 PM by</div>
                                    <!--end::Info-->
                                    <!--begin::User-->
                                    <div class="symbol symbol-circle symbol-25px" data-bs-toggle="tooltip" data-bs-boundary="window" data-bs-placement="top" aria-label="Nina Nilson" data-bs-original-title="Nina Nilson" data-kt-initialized="1">
                                    <img src="/metronic8/demo1/assets/media/avatars/300-14.jpg" alt="img">
                                    </div>
                                    <!--end::User-->
                                    </div>
                                    <!--end::Description-->
                                    </div>
                                    <!--end::Timeline heading-->
                                    </div>
                                    <!--end::Timeline content-->
                                    </div> *@
                                </div>
                                <div class="row">
                                    <div id="pageInfo-notification" class="col-sm-12 col-md-6 d-flex align-items-center justify-content-center justify-content-md-start"></div>
                                    <div id="pagination" class="col-sm-12 col-md-6 d-flex align-items-center justify-content-center justify-content-md-end"></div>
                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="tab-pane fade d-none" id="kt_tab_pane_4" role="tabpanel">
                        <div class="card mb-5 mb-xl-10">
                            <div class="hide-with-warehouse">
                                <div class="table-content">
                                    <!--begin::Col-->
                                    <!--begin::Wrapper-->
                                    <div class="d-flex flex-stack mb-5">
                                        <!--begin::Search-->
                                        <div class="d-flex align-items-center position-relative my-1">
                                            <i class="ki-duotone ki-magnifier fs-1 position-absolute ms-6"><span class="path1"></span><span class="path2"></span></i>
                                            <input type="search" data-kt-docs-table-filter="search" class="form-control form-control-solid w-250px ps-15" id="search-history-kpi" placeholder="Tìm kiếm" />
                                        </div>
                                    </div>
                                    <!--end::Wrapper-->
                                    <!--begin::Datatable-->
                                    <div>
                                        <table id="tableHistoryKPI" class="table table-hover table-rounded table-row-bordered gy-3 gs-3">
                                            <thead>
                                                <tr class="fw-bold fs-6 text-gray-800">
                                                    <th class="column-stt">STT</th>
                                                    <th class="column-date">Ngày áp dụng</th>
                                                    <th class="column-kpi">KPI</th>
                                                    <th class="column-createdTime">Ngày tạo</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                            <tfoot>
                                            </tfoot>
                                        </table>
                                        <div class="row">
                                            <div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-start">
                                                <div id="info-filter-history-kpi">Đang xem 0 đến 0 trong tổng số 0 mục (được lọc từ 0 mục)</div>
                                            </div>
                                            <div id="history-kpi-paging" class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-end"></div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const roleId = @ViewBag.RoleId;
        var accountKPIPaging = {
            "accountId": @ViewBag.AccountId,
            "pageIndex": 1,
            "pageSize": 10,
            "searchAll": "",
        }

        // khi sear all
        $('#search-history-kpi').on("keypress", function (e) {
            if (e.keyCode === 13) {
                accountKPIPaging.pageIndex = 1;
                loadHistoryKPIPaging();
            }
        });

        // thay đổi chỉ mục
        $("#history-kpi-paging").on("click", ".page-link", function (e) {
            e.preventDefault();
            if ($(this).parent().hasClass("active") || $(this).parent().hasClass("disabled") || $(this).text() == "...") {
                return;
            }
            if ($(this).parent().hasClass("previous")) {
                accountKPIPaging.pageIndex -= 1;
            }
            else if ($(this).parent().hasClass("next")) {
                accountKPIPaging.pageIndex += 1;
            }
            else {
                $("#history-kpi-paging .page-item").removeClass("active");
                $(this).addClass("active");
                accountKPIPaging.pageIndex = parseInt($(this).text());
            }
            loadHistoryKPIPaging();
        });



        $(document).ready(function () {
            //debugger;
            var url = window.location.href;
            if (url.includes("#notification")) {
                $('#kt_tab_pane_1').addClass("d-none");
                $('#view-info').removeClass("active");
                $('#kt_tab_pane_3').removeClass("d-none");
                $('#view-notification').addClass("active");
                $('#kt_tab_pane_3').addClass("show active");
            }
            $("#list-notification").on("click mousedown", ".notification-update-status-newtab", function () {
                let notiSelect = $(this);
                let id = notiSelect.attr("data-id");
                if (notiSelect.hasClass("unread")) {

                    notiSelect.addClass("read");

                    notiSelect.removeClass("unread");

                    notiSelect.children().remove();

                    $("#notification-id-" + id).children().remove();
                    $("#notification-id-" + id).addClass("read");
                    $("#notification-id-" + id).removeClass("unread");

                    //call api update noti status
                    $.ajax({
                        url: systemURL + "notification/api/read-notification",
                        type: "POST",
                        contentType: "application/json",
                        data: JSON.stringify(id),
                        success: function (responseData) {
                            // if (responseData.status == 200 && responseData.message === "SUCCESS") {

                            // }
                        },
                        error: function (e) {

                        }
                    });
                }
            });
        });

        const VND = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
        });
        var currentView = 0; // 0: màn info,   1 : màn change pass
        document.getElementById('update-info').addEventListener('click', function (e) {
            e.preventDefault();
            ValidateData();
        });
        document.getElementById('update-pass').addEventListener('click', function (e) {
            e.preventDefault();
            ValidateData();
        });
        $('.btn_show_old_pass').on('click', function (e) {
            if ($('#old-pass').attr('type') == 'text') {
                $('#old-pass').attr('type', 'password');
                $(this).html(`<i class="ki-duotone ki-eye fs-3" id="icon-old-pass">
                                                                   <span class="path1 ki-uniEC0B"></span>
                                                                   <span class="path2 ki-uniEC0B"></span>
                                                                   <span class="path3 ki-uniEC0D"></span>
                                                              </i>`);

            } else {
                $('#old-pass').attr('type', 'text');
                $(this).html(`<i class="ki-duotone ki-eye-slash fs-3" id="icon-old-pass">
                                                                       <span class="path1 ki-uniEC0B"></span>
                                                                       <span class="path2 ki-uniEC0B"></span>
                                                                       <span class="path3 ki-uniEC0D"></span>
                                                                  </i>`);
            }

        });
        $('.btn_show_confirm_pass').on('click', function (e) {
            if ($('#confirm-pass').attr('type') == 'text') {
                $('#confirm-pass').attr('type', 'password');
                $(this).html(`<i class="ki-duotone ki-eye fs-3" id="icon-confirm-pass">
                                                                       <span class="path1 ki-uniEC0B"></span>
                                                                       <span class="path2 ki-uniEC0B"></span>
                                                                       <span class="path3 ki-uniEC0D"></span>
                                                                  </i>`);

            } else {
                $('#confirm-pass').attr('type', 'text');
                $(this).html(`<i class="ki-duotone ki-eye-slash fs-3" id="icon-confirm-pass">
                                                                           <span class="path1 ki-uniEC0B"></span>
                                                                           <span class="path2 ki-uniEC0B"></span>
                                                                           <span class="path3 ki-uniEC0D"></span>
                                                                      </i>`);
            }

        });
        $('.btn_show_new_pass').on('click', function (e) {
            if ($('#new-pass').attr('type') == 'text') {
                $('#new-pass').attr('type', 'password');
                $(this).html(`<i class="ki-duotone ki-eye fs-3" id="icon-new-pass">
                                                                   <span class="path1 ki-uniEC0B"></span>
                                                                   <span class="path2 ki-uniEC0B"></span>
                                                                   <span class="path3 ki-uniEC0D"></span>
                                                              </i>`);

            } else {
                $('#new-pass').attr('type', 'text');
                $(this).html(`<i class="ki-duotone ki-eye-slash fs-3" id="icon-new-pass">
                                                                       <span class="path1 ki-uniEC0B"></span>
                                                                       <span class="path2 ki-uniEC0B"></span>
                                                                       <span class="path3 ki-uniEC0D"></span>
                                                                  </i>`);
            }

        });
        $(document).ready(function () {

            $('#view-password').click(function () {
                $('#kt_tab_pane_2').removeClass("d-none");
                $('#kt_tab_pane_1').addClass("d-none");
                $('#kt_tab_pane_3').addClass("d-none");
                
                currentView = 1;
            });
            $('#view-info').click(function () {
                $('#kt_tab_pane_2').addClass("d-none");
                $('#kt_tab_pane_3').addClass("d-none");
               
                $('#kt_tab_pane_1').removeClass("d-none");
                currentView = 0;
            });
            $('#view-notification').click(function () {
                $('#kt_tab_pane_1').addClass("d-none");
                $('#kt_tab_pane_2').addClass("d-none");
               
                $('#kt_tab_pane_3').removeClass("d-none");
            });

            $('#view-history-kpi').click(function () {
                $('#kt_tab_pane_1').addClass("d-none");
                $('#kt_tab_pane_2').addClass("d-none");
                $('#kt_tab_pane_3').addClass("d-none");
                $('#kt_tab_pane_4').removeClass("d-none");
                loadHistoryKPIPaging();
            });
            GetInfoProfile();

        });
        function GetInfoProfile() {
            $.ajax({
                url: "/account/api/profile",
                type: "GET",
                beforeSend: function (xhr) {
                    if (localStorage.token) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                    }
                },
                success: function (response) {
                    if (response.status == 200) {
                        var infoProfile = response.data[0];
                        $("#full-name").val(infoProfile.name);
                        $("#full-name-login").text(infoProfile.accountName);
                        $("#user-name").text(infoProfile.accountName);
                        $("#role-name").text(infoProfile.roleName);
                        $("#role-name-login").text(infoProfile.roleName);
                    }
                },
                error: function (request, status, error) {
                    //console.error(error);
                },
            });
        }
        function ValidateData() {
            var listError = [];
            if (currentView == 0) {
                if ($("#full-name").val().length == 0) {
                    listError.push("Họ và tên không được để trống");
                }
                if ($("#full-name").val().length > 255) {
                    listError.push("Họ và tên không được nhiều hơn 255 kí tự");
                }
            }
            else {
                if ($("#old-pass").val().length < 6) {
                    listError.push("Độ dài Mật khẩu hiện tại không được nhỏ hơn 6");
                }
                if ($("#old-pass").val().length > 255) {
                    listError.push("Mật khẩu hiện tại không được nhiều hơn 255 kí tự");
                }
                if ($("#new-pass").val().length < 6) {
                    listError.push("Độ dài Mật khẩu mới không được nhỏ hơn 6");
                }
                if ($("#new-pass").val().length > 255) {
                    listError.push("Mật khẩu mới không được nhiều hơn 255 kí tự");
                }
                if ($("#confirm-pass").val().length < 6) {
                    listError.push("Độ dài xác nhận lại mật khẩu không được nhỏ hơn 6");
                }
                if ($("#confirm-pass").val().length > 255) {
                    listError.push("Nhập lại mật khẩu mới không được nhiều hơn 255 kí tự");
                }
                if ($("#new-pass").val() != $("#confirm-pass").val()) {
                    listError.push("Mật khẩu mới và Nhập lại mật khẩu mới không giống nhau ");
                }
            }
            if (listError.length > 0) {
                contentError = "<ul>";
                listError.forEach(function (item, index) {
                    contentError += "<li class='text-start'>" + item + "</li>";
                })
                contentError += "</ul>";
                Swal.fire(
                    "Cập nhật không thành công",
                    contentError,
                    "warning"
                );

            }
            else {
                if (currentView == 0) {
                    UpdateProfile();
                }
                else {
                    UpdateProfile();
                }
            }
        }

        function UpdateProfile() {
            var objInfo = {
                "name": $("#full-name").val(),
                "userName": $("#user-name").text(),
                "roleName": $("#role-name").text(),
            };
            var objPassword = {
                "newPassword": $("#new-pass").val(),
                "password": $("#old-pass").val(),
                "confirm": $("#confirm-pass").val(),
            };
            Swal.fire({
                title: 'Xác nhận thay đổi?',
                text: 'Thay đổi thông tin cá nhân',
                icon: 'info',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#443',
                confirmButtonText: 'Xác nhận',
                cancelButtonText: 'Huỷ'
            }).then((result) => {
                if (result.value) {
                    if (currentView == 0) {
                        $.ajax({
                            url: "/account/api/change-userDetail",
                            type: "POST",
                            contentType: "application/json",
                            beforeSend: function (xhr) {
                                if (localStorage.token) {
                                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
                                }
                            },
                            data: JSON.stringify(objInfo),
                            success: function (responseData) {
                                if (responseData.status == 200 && responseData.message === "SUCCESS") {
                                    Swal.fire(
                                        'Thành Công!',
                                        'Đã cập nhật thông tin cá nhân',
                                        'success'
                                    );
                                    $(".full-name").text($("#full-name").val());
                                    $("#full-name-login").text($("#full-name").val());
                                }
                            },
                            error: function (e) {
                                Swal.fire(
                                    'Lỗi!',
                                    'Đã xảy ra lỗi, vui lòng thử lại',
                                    'error'
                                );
                            }
                        });
                    }
                    else {
                        $.ajax({
                            url: "/account/api/change-password",
                            type: "POST",
                            contentType: "application/json",
                            data: JSON.stringify(objPassword),
                            success: function (responseData) {
                                if (responseData.status == 200 && responseData.message === "SUCCESS") {
                                    Swal.fire(
                                        'Thành Công!',
                                        'Đã cập nhật mật khẩu',
                                        'success'
                                    );
                                }
                            },
                            error: function (e) {
                                Swal.fire(
                                    'Lỗi!',
                                    'Đã xảy ra lỗi, vui lòng thử lại',
                                    'error'
                                );
                            }
                        });
                    }
                }
            })
        }

        $(document).ready(function () {
            // LoadNotification();
            $("#pagination").on("click", ".page-link", function (e) {
                let parent = $(this).parent();
                if (!parent.hasClass("disabled")) {
                    if (parent.hasClass("next")) {
                        pageIndex++;
                        LoadNotification()
                    }
                    else if (parent.hasClass("previous")) {
                        pageIndex--;
                        LoadNotification()
                    }
                    else {
                        let pageNumber = $(this).text();

                        if (!parent.hasClass("active") && pageNumber != "...") {
                            pageIndex = pageNumber;
                            LoadNotification()
                        }
                    }
                }
            })

        });

        var pageIndex = 1;
        var pageSize = 10;
        // function LoadNotification() {
        //     $.ajax({
        //         url: "/notification/api/list-by-accountId?pageIndex=" + pageIndex + "&pageSize=" + pageSize,
        //         type: "POST",
        //         contentType: "application/json",
        //         beforeSend: function (xhr) {
        //             if (localStorage.token) {
        //                 xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.token);
        //             }
        //         },
        //         success: function (responseData) {
        //             //console.log(responseData);
        //             if (responseData.status == 200 && responseData.message === "SUCCESS") {
        //                 totalPage = responseData.data[0].totalPage;
        //                 if (totalPage > 0) {
        //                     pagination("#pagination", totalPage, pageIndex);
        //                     $("#pageInfo-notification").text(responseData.data[0].pageInfo);
        //                     let html = "";
        //                     responseData.data[0].resourses.forEach(function (row) {
        //                         var icon;
        //                         var title
        //                         if (row.description == "Order_Add") {
        //                             icon = `<span class='symbol-label bg-light-primary'>
        //                                                                               <i class='ki-duotone ki-abstract-28 fs-2 text-primary'>
        //                                                                                    <span class='path1'></span>
        //                                                                                      <span class='path2'></span>
        //                                                                                 </i>
        //                                                                              </span>`;
        //                             title = "Đơn hàng mới";
        //                         }
        //                         else if (row.description == "Order_Update") {
        //                             icon = `<span class="symbol-label bg-light-danger">
        //                                                                                 <i class="ki-duotone ki-information fs-2 text-danger"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
        //                                                                             </span>`
        //                             //title = "Cập nhật đơn hàng";
        //                         }
        //                         html += `
        //                                                               <div class="timeline-item">
        //                                                                                 <div class="timeline-line"></div>
        //                                                                                 <div class="timeline-icon me-4">
        //                                                                                     `+ icon + `
        //                                                                                 </div>
        //                                                                                 <div class="timeline-content mb-10 mt-n2">
        //                                                                                     <div class="overflow-auto pe-3">
        //                                                                             <a href="/Orders/admin/list?orderId=`+ row.senderId + `" target="_blank" class="fs-6 text-gray-800 text-hover-primary fw-bold notification-update-status-newtab ` + (row.notificationStatusId == NotificationStatusId.Unread ? "unread" : "read") + `" data-id='` + row.id + `'>` + row.name + `
        //                                                                                     `+ (row.notificationStatusId == NotificationStatusId.Unread ? `<span class="badge badge-circle badge-primary h-10px w-10px text-end animation-blink ms-10"></span>` : "") + `


        //                                                                     </a>


        //                                                                                         <div class="d-flex align-items-center mt-1 fs-6">
        //                                                                                                     <div class="text-muted me-2 fs-7">`+ moment(row.createdTime).fromNow() + `</div>

        //                                                                                         </div>
        //                                                                                  </div>
        //                                                                        </div>
        //                                                                  </div>

        //                                                         `;
        //                     });
        //                     $("#list-notification").html(html);
        //                 }
        //                 else {
        //                     $("#list-notification").html(`<h5>Hiện chưa có thông báo nào</h5>`);
        //                 }
        //             }
        //         },
        //         error: function (e) {
        //             $("#list-notification").html(`<h5>Hiện chưa có thông báo nào</h5>`);
        //         }
        //     });
        // }

       


    </script>

